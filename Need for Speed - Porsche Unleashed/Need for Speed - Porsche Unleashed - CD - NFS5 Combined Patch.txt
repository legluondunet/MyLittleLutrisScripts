files:
- game_cd: https://archive.org/download/NeedForSpeed_Collection-Archive-LivBs/2000_05-NFS_PU/Game/NFS_Porsche_Unleashed_%28US%29_%5BISO%5D.zip
- game_patch: https://github.com/legluondunet/MyLittleLutrisScripts/raw/refs/heads/master/Need%20for%20Speed%20-%20Porsche%20Unleashed/NFS5-Combined-Patch-v1.1.zip
game:
  exe: drive_c/Program Files (x86)/Electronic Arts/Need For Speed - Porsche Unleashed/nfs5.exe
  launch_configs:
  - exe: $GAMEDIR/drive_c/Program Files (x86)/Electronic Arts/Need For Speed - Porsche
      Unleashed/config.exe
    name: Configuring game graphics drivers and other optimizations
  prefix: $GAMEDIR
installer:
- task:
    arch: win64
    name: create_prefix
    prefix: $GAMEDIR
- extract:
    dst: $CACHE
    file: game_cd
    format: zip
- extract:
    description: extracting ISO...
    dst: $CACHE/CD
    file: $CACHE/NFS_PU.iso
    format: iso
- task:
    executable: $CACHE/CD/AutoRun.exe
    name: wineexec
    prefix: $GAMEDIR
- merge:
    dst: $GAMEDIR/drive_c/Program Files (x86)/Electronic Arts/Need For Speed - Porsche
      Unleashed/FEData/Movies
    src: $CACHE/CD/FEData/Movies
- extract:
    dst: $GAMEDIR/drive_c/Program Files (x86)/Electronic Arts/Need For Speed - Porsche
      Unleashed/patch
    file: game_patch
    format: zip
- merge:
    dst: $GAMEDIR/drive_c/Program Files (x86)/Electronic Arts/Need For Speed - Porsche
      Unleashed
    src: $GAMEDIR/drive_c/Program Files (x86)/Electronic Arts/Need For Speed - Porsche
      Unleashed/patch/Copy
- input_menu:
    description: 'Choose your preferred language for game''s menu:'
    id: LANG
    options:
    - english: English
    - german: German
    - french: French
    - spanish: Spanish
    - italian: Italian
    - swedish: Swedish
    - portbrzl: Brazillian Portuguese
    preselect: english
- write_config:
    data:
      NFS5:
        Language: $INPUT_LANG
        ThrashDriver: opengl3
    file: $GAMEDIR/drive_c/Program Files (x86)/Electronic Arts/Need For Speed - Porsche
      Unleashed/nfs5.ini
    merge: true
- execute:
    command: cd "$GAMEDIR/drive_c/Program Files (x86)/Electronic Arts/Need For Speed
      - Porsche Unleashed/SaveData" ; mv 8Driver.sav 8Driver.sav.bak ;
