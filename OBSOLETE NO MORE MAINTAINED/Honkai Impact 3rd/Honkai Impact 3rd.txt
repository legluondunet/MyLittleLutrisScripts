files:
- patch: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/OBSOLETE%20NO%20MORE%20MAINTAINED/Genshin%20Impact/hi3_patch.zip
- giclient:
    filename: bh3_glb_new_20220627162920.exe
    url: https://sg-public-api.hoyoverse.com/event/download_porter/link/bh3_os/pcglobal/default
- menubat: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/OBSOLETE%20NO%20MORE%20MAINTAINED/Genshin%20Impact/hi3_menu.bat
- menush: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/OBSOLETE%20NO%20MORE%20MAINTAINED/Genshin%20Impact/hi3_patch.sh
- bmp: https://github.com/legluondunet/MyLittleLutrisScripts/raw/master/OBSOLETE%20NO%20MORE%20MAINTAINED/Genshin%20Impact/hi3.bmp
game:
  args: c:\\hi3_menu.bat
  exe: drive_c/windows/syswow64/wineconsole.exe
  prefix: $GAMEDIR
installer:
- task:
    arch: win64
    install_gecko: false
    install_mono: false
    name: create_prefix
    prefix: $GAMEDIR
- task:
    app: vcrun2019 corefonts
    name: winetricks
    prefix: $GAMEDIR
- task:
    args: /desktop=GI,1280x900 $giclient
    description: Installing Genshin Impact...Close Geshin Impact client once finished
      download, do not execute the game yet.
    executable: $GAMEDIR/drive_c/windows/explorer.exe
    name: wineexec
- copy:
    dst: $GAMEDIR/drive_c
    src: menubat
- chmodx: menush
- copy:
    dst: $GAMEDIR/drive_c
    src: menush
- copy:
    dst: $GAMEDIR/drive_c
    src: bmp
- task:
    arch: win64
    key: background
    name: set_regedit
    path: HKEY_CURRENT_USER\Control Panel\Colors\
    prefix: $GAMEDIR
    type: REG_SZ
    value: 0 0 0
- task:
    arch: win64
    key: wallpaper
    name: set_regedit
    path: HKEY_CURRENT_USER\Control Panel\Desktop\
    prefix: $GAMEDIR
    type: REG_SZ
    value: c:\\hi3.bmp
- extract:
    dst: $GAMEDIR/drive_c/hi3_patch
    file: patch
    format: zip
- chmodx: $GAMEDIR/drive_c/hi3_patch/ex_apatch.sh
- chmodx: $GAMEDIR/drive_c/hi3_patch/ex_rpatch.sh
require-binaries: xdelta3, xterm, zenity
system:
  manual_command: $GAMEDIR/drive_c/hi3_patch.sh
wine:
  Desktop: true
